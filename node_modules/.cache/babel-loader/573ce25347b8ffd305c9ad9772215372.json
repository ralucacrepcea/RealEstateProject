{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import{auth,db}from'../Config/Config';import{CartContext}from'../Global/CartContext';import{Navbar}from'./Navbar';import{useHistory}from'react-router-dom';export const Cashout=props=>{const history=useHistory();const{shoppingCart,totalPrice,totalQty,dispatch}=useContext(CartContext);// defining state\nconst[name,setName]=useState('');const[email,setEmail]=useState('');const[cell,setCell]=useState('');const[address,setAddress]=useState('');const[error,setError]=useState('');const[successMsg,setSuccessMsg]=useState('');useEffect(()=>{auth.onAuthStateChanged(user=>{if(user){db.collection('SignedUpUsersData').doc(user.uid).onSnapshot(snapshot=>{setName(snapshot.data().Name);setEmail(snapshot.data().Email);});}else{history.push('/login');}});});const cashoutSubmit=e=>{e.preventDefault();auth.onAuthStateChanged(user=>{if(user){const date=new Date();const time=date.getTime();db.collection('Buyer-info '+user.uid).doc('_'+time).set({BuyerName:name,BuyerEmail:email,BuyerCell:cell,// BuyerAddress: address,\nBuyerPayment:totalPrice// BuyerQuantity: totalQty\n}).then(()=>{setCell('');setAddress('');dispatch({type:'EMPTY'});setSuccessMsg('Your order has been placed successfully. Thanks for visiting us. You will be redirected to home page after 5 seconds');setTimeout(()=>{history.push('/');},5000);}).catch(err=>setError(err.message));}});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Navbar,{user:props.user}),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h1\",{className:\"centered-title\"},\"My Details\"),/*#__PURE__*/React.createElement(\"br\",null),successMsg&&/*#__PURE__*/React.createElement(\"div\",{className:\"success-msg\"},successMsg),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",className:\"form-group\",onSubmit:cashoutSubmit},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",required:true,value:name,disabled:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",className:\"form-control\",required:true,value:email,disabled:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Cell No\"},\"Cell No\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",required:true,onChange:e=>setCell(e.target.value),value:cell,placeholder:\"+40 7XXXXXXXX\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Price To Pay\"},\"Price To Pay\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",required:true,value:totalPrice,disabled:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-success btn-md mybtn\"},\"SUBMIT\")),error&&/*#__PURE__*/React.createElement(\"span\",{className:\"error-msg\"},error)));};","map":{"version":3,"names":["React","useState","useEffect","useContext","auth","db","CartContext","Navbar","useHistory","Cashout","props","history","shoppingCart","totalPrice","totalQty","dispatch","name","setName","email","setEmail","cell","setCell","address","setAddress","error","setError","successMsg","setSuccessMsg","onAuthStateChanged","user","collection","doc","uid","onSnapshot","snapshot","data","Name","Email","push","cashoutSubmit","e","preventDefault","date","Date","time","getTime","set","BuyerName","BuyerEmail","BuyerCell","BuyerPayment","then","type","setTimeout","catch","err","message","createElement","Fragment","className","autoComplete","onSubmit","htmlFor","required","value","disabled","onChange","target","placeholder"],"sources":["/Users/raluca-mariacrepcea/Desktop/RealEstate/EcommercsWithReactAndFirebase/src/Components/Cashout.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { auth, db } from '../Config/Config'\nimport { CartContext } from '../Global/CartContext'\nimport { Navbar } from './Navbar';\nimport { useHistory } from 'react-router-dom'\n\nexport const Cashout = (props) => {\n\n    const history = useHistory();\n\n    const { shoppingCart, totalPrice, totalQty, dispatch } = useContext(CartContext);\n\n    // defining state\n    const [name, setName] = useState('');\n    const [email, setEmail] = useState('');\n    const [cell, setCell] = useState('');\n    const [address, setAddress] = useState('');\n    const [error, setError] = useState('');\n    const [successMsg, setSuccessMsg] = useState('');\n\n    useEffect(() => {\n        auth.onAuthStateChanged(user => {\n            if (user) {\n                db.collection('SignedUpUsersData').doc(user.uid).onSnapshot(snapshot => {\n                    setName(snapshot.data().Name);\n                    setEmail(snapshot.data().Email);\n                })\n            }\n            else {\n                history.push('/login')\n            }\n        })\n    })\n\n    const cashoutSubmit = (e) => {\n        e.preventDefault();\n        auth.onAuthStateChanged(user => {\n            if (user) {\n                const date = new Date();\n                const time = date.getTime();\n                db.collection('Buyer-info ' + user.uid).doc('_' + time).set({\n                    BuyerName: name,\n                    BuyerEmail: email,\n                    BuyerCell: cell,\n                   // BuyerAddress: address,\n                    BuyerPayment: totalPrice,\n                   // BuyerQuantity: totalQty\n                }).then(() => {\n                    setCell('');\n                    setAddress('');\n                    dispatch({ type: 'EMPTY' })\n                    setSuccessMsg('Your order has been placed successfully. Thanks for visiting us. You will be redirected to home page after 5 seconds');\n                    setTimeout(() => {\n                        history.push('/')\n                    }, 5000)\n                }).catch(err => setError(err.message))\n            }\n        })\n    }\n\n    return (\n        <>\n            <Navbar user={props.user} />\n            <div className='container'>\n                <br />\n                <h1 className=\"centered-title\">My Details</h1>\n                <br />\n                {successMsg && <div className='success-msg'>{successMsg}</div>}\n                <form autoComplete=\"off\" className='form-group' onSubmit={cashoutSubmit}>\n                    <label htmlFor=\"name\">Name</label>\n                    <input type=\"text\" className='form-control' required\n                        value={name} disabled />\n                    <br />\n                    <label htmlFor=\"email\">Email</label>\n                    <input type=\"email\" className='form-control' required\n                        value={email} disabled />\n                    <br />\n                    <label htmlFor=\"Cell No\">Cell No</label>\n                    <input type=\"number\" className='form-control' required\n                        onChange={(e) => setCell(e.target.value)} value={cell} placeholder='+40 7XXXXXXXX' />\n                    <br />\n                    <label htmlFor=\"Price To Pay\">Price To Pay</label>\n                    <input type=\"number\" className='form-control' required\n                        value={totalPrice} disabled />\n                    <br />\n                    <button type=\"submit\" className='btn btn-success btn-md mybtn'>SUBMIT</button>\n                </form>\n                {error && <span className='error-msg'>{error}</span>}\n            </div>\n        </>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}