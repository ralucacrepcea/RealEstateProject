{"ast":null,"code":"import React,{useState}from'react';import{storage,db}from'../Config/Config';export const AddProducts=()=>{const[productName,setProductName]=useState('');const[productPrice,setProductPrice]=useState(0);const[productImg,setProductImg]=useState(null);const[error,setError]=useState('');const types=['image/png','image/jpeg'];// image types\nconst productImgHandler=e=>{let selectedFile=e.target.files[0];if(selectedFile&&types.includes(selectedFile.type)){setProductImg(selectedFile);setError('');}else{setProductImg(null);setError('Please select a valid image type (jpg or png)');}};// add product\nconst addProduct=e=>{e.preventDefault();const uploadTask=storage.ref(\"product-images/\".concat(productImg.name)).put(productImg);uploadTask.on('state_changed',snapshot=>{const progress=snapshot.bytesTransferred/snapshot.totalBytes*100;console.log(progress);},err=>setError(err.message),()=>{storage.ref('product-images').child(productImg.name).getDownloadURL().then(url=>{db.collection('Products').add({ProductName:productName,ProductPrice:Number(productPrice),ProductImg:url}).then(()=>{setProductName('');setProductPrice(0);setProductImg('');setError('');document.getElementById('file').value='';}).catch(err=>setError(err.message));});});};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"h2\",null,\"ADD PRODUCTS\"),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"form\",{autoComplete:\"off\",className:\"form-group\",onSubmit:addProduct},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"product-name\"},\"Product Name\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",required:true,onChange:e=>setProductName(e.target.value),value:productName}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"product-price\"},\"Product Price\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",required:true,onChange:e=>setProductPrice(e.target.value),value:productPrice}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"product-img\"},\"Product Image\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"form-control\",id:\"file\",required:true,onChange:productImgHandler}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-success btn-md mybtn\"},\"ADD\")),error&&/*#__PURE__*/React.createElement(\"span\",{className:\"error-msg\"},error));};","map":{"version":3,"names":["React","useState","storage","db","AddProducts","productName","setProductName","productPrice","setProductPrice","productImg","setProductImg","error","setError","types","productImgHandler","e","selectedFile","target","files","includes","type","addProduct","preventDefault","uploadTask","ref","concat","name","put","on","snapshot","progress","bytesTransferred","totalBytes","console","log","err","message","child","getDownloadURL","then","url","collection","add","ProductName","ProductPrice","Number","ProductImg","document","getElementById","value","catch","createElement","className","autoComplete","onSubmit","htmlFor","required","onChange","id"],"sources":["/Users/raluca-mariacrepcea/Desktop/RealEstate/EcommercsWithReactAndFirebase/src/Components/AddProducts.js"],"sourcesContent":["import React, { useState } from 'react'\nimport { storage, db } from '../Config/Config'\n\nexport const AddProducts = () => {\n\n    const [productName, setProductName] = useState('');\n    const [productPrice, setProductPrice] = useState(0);\n    const [productImg, setProductImg] = useState(null);\n    const [error, setError] = useState('');\n\n    const types = ['image/png', 'image/jpeg']; // image types\n\n    const productImgHandler = (e) => {\n        let selectedFile = e.target.files[0];\n        if (selectedFile && types.includes(selectedFile.type)) {\n            setProductImg(selectedFile);\n            setError('')\n        }\n        else {\n            setProductImg(null);\n            setError('Please select a valid image type (jpg or png)');\n        }\n    }\n\n    // add product\n    const addProduct = (e) => {\n        e.preventDefault();\n        const uploadTask = storage.ref(`product-images/${productImg.name}`).put(productImg);\n        uploadTask.on('state_changed', snapshot => {\n            const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(progress);\n        }, err => setError(err.message)\n            , () => {\n                storage.ref('product-images').child(productImg.name).getDownloadURL().then(url => {\n                    db.collection('Products').add({\n                        ProductName: productName,\n                        ProductPrice: Number(productPrice),\n                        ProductImg: url\n                    }).then(() => {\n                        setProductName('');\n                        setProductPrice(0)\n                        setProductImg('');\n                        setError('');\n                        document.getElementById('file').value = '';\n                    }).catch(err => setError(err.message))\n                })\n            })\n    }\n\n    return (\n        <div className='container'>\n            <br />\n            <h2>ADD PRODUCTS</h2>\n            <hr />\n            <form autoComplete=\"off\" className='form-group' onSubmit={addProduct}>\n                <label htmlFor=\"product-name\">Product Name</label>\n                <input type=\"text\" className='form-control' required\n                    onChange={(e) => setProductName(e.target.value)} value={productName} />\n                <br />\n                <label htmlFor=\"product-price\">Product Price</label>\n                <input type=\"number\" className='form-control' required\n                    onChange={(e) => setProductPrice(e.target.value)} value={productPrice} />\n                <br />\n                <label htmlFor=\"product-img\">Product Image</label>\n                <input type=\"file\" className='form-control' id=\"file\" required\n                    onChange={productImgHandler} />\n                <br />\n                <button type=\"submit\" className='btn btn-success btn-md mybtn'>ADD</button>\n            </form>\n            {error && <span className='error-msg'>{error}</span>}\n        </div>\n    )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}